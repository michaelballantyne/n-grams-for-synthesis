# n-grams-for-synthesis

n-gram probabilities based on Lisp code, for directing search of the relational Scheme interpreter, and a prototype example relational interpreter with a search (crudely) informed by these probabilities.

Based on detailed discussions with Michael Ballantyne, Rob Zinkov, Ramana Kumar, Greg Rosenblatt, Evan Donahue, Nehal Patel, and the broader miniKanren community.


Please see the `EXPLAIN.txt` file in `relational-interpreter` for details on the relational interpreters.


Example generation of bigrams using Chez Scheme:

```
> (load "n-grams.scm")
> bigrams-sorted-by-type/counts
(((and app) . 22)
 ((and null?) . 8)
 ((and equal?) . 2)
 ((app-rand* var-arg) . 103)
 ((app-rand* cdr) . 65)
 ((app-rand* car) . 40)
 ((app-rand* app) . 24)
 ((app-rand* cons) . 3)
 ((app-rand* nil) . 3)
 ((app-rand* lambda) . 2)
 ((app-rand* if) . 1)
 ((app-rand* list) . 1)
 ((app-rand* null?) . 1)
 ((app-rator var-recur) . 72)
 ((app-rator var) . 61)
 ((app-rator var-arg) . 6)
 ((car var-arg) . 82)
 ((car cdr) . 6)
 ((car car) . 2)
 ((car var) . 2)
 ((cdr var-arg) . 75)
 ((cdr cdr) . 3)
 ((cdr car) . 1)
 ((cons-a car) . 19)
 ((cons-a var-arg) . 10)
 ((cons-a app) . 5)
 ((cons-a cons) . 1)
 ((cons-d app) . 27)
 ((cons-d cons) . 4)
 ((cons-d var-arg) . 2)
 ((cons-d cdr) . 1)
 ((cons-d list) . 1)
 ((define lambda) . 44)
 ((equal? car) . 22)
 ((equal? var-arg) . 17)
 ((equal? quoted-symbol) . 3)
 ((if-alt if) . 40)
 ((if-alt app) . 21)
 ((if-alt cons) . 17)
 ((if-alt and) . 3)
 ((if-alt bool) . 2)
 ((if-alt equal?) . 1)
 ((if-alt or) . 1)
 ((if-conseq bool) . 24)
 ((if-conseq nil) . 15)
 ((if-conseq app) . 10)
 ((if-conseq cons) . 10)
 ((if-conseq var-arg) . 7)
 ((if-conseq num) . 6)
 ((if-conseq and) . 5)
 ((if-conseq car) . 3)
 ((if-conseq cdr) . 3)
 ((if-conseq if) . 1)
 ((if-conseq or) . 1)
 ((if-test null?) . 33)
 ((if-test app) . 20)
 ((if-test equal?) . 17)
 ((if-test and) . 8)
 ((if-test or) . 4)
 ((if-test pair?) . 2)
 ((if-test not) . 1)
 ((lambda-multi if) . 43)
 ((lambda-multi app) . 3)
 ((list car) . 2)
 ((not pair?) . 1)
 ((null? var-arg) . 45)
 ((null? cdr) . 1)
 ((or app) . 7)
 ((or null?) . 4)
 ((or equal?) . 1)
 ((pair? car) . 3)
 ((top-level define) . 44))
```